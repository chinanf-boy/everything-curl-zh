
## 协议

用于请求以任何方向发送数据的语言称为 **协议**. 该协议描述了如何向服务器请求数据,或者告诉服务器有数据到来.

协议通常由IETF定义.[IETF-因特网工程任务组](https://www.ietf.org/), 它托管RFC文档,这些文档精确地描述了每个协议的工作原理:客户端和服务器应该如何操作,以及发送什么等等.

## cURL支持什么协议?

curl支持允许在任一个或两个方向上的"数据传输"协议.我们通常还限制自己使用RFC中描述的"URI格式"协议,或者至少有些广泛使用的协议,因为curl主要使用URL(URI)作为指定传输的输入关键.

最新的curl(如本文)支持这些协议:

DICT, FILE, FTP, FTPS, GOPHER, HTTP, HTTPS, IMAP, IMAPS, LDAP, LDAPS, POP3,
POP3S, RTMP, RTSP, SCP, SFTP, SMB, SMBS, SMTP, SMTPS, TELNET, TFTP

更复杂的是,协议往往存在于不同的版本或口味.

## 还有其他协议吗?

世界充满了新的和新的协议.旧的协议被抛弃和丢弃,新的协议被引入.从来没有一个稳定的状态,但情况每天都在变化,年复一年.您可以放心,将来在上面的列表中,将添加新的协议,也将会有已经列出的协议的新版本.

当然,有已经存在其他的协议,curl还没有支持. 但我们愿意支持更多的,适合一般curl范式的协议,我们只需要开发人员为它们编写必要的代码调整.

## 协议是如何开发的?

现有协议的新版本和完全新协议通常都是由认为现有协议不够好的人员或团队开发的. 关于它们的一些东西使得它们不适合于特定的用例,或者可能已经出现了一些可以应用于改进事物的新想法.

当然,没有任何东西可以阻止任何人在自己的后院自娱自乐地完全自主开发协议,但是主要的协议通常在相当早期的阶段被带到IETF,在那里它们被讨论、细化、辩论和抛光,然后最终,充满希望. 最终变成了一个已发布的RFC文档.

然后,软件开发人员阅读RFC规范,并根据他们对这些文档中单词的解释在世界上部署他们的代码.有时,一些规范会受到非常不同的解释,或者有时工程师只是懒散地忽略规范中的合理建议,而部署一些并不符合规范的东西.因此,编写与规范的其他实现交互操作的软件最终会是一项艰巨的工作.

## 协议改变了多少?

与软件一样,协议规范经常被更新,并且创建新的协议版本.

大多数协议允许某种程度的可扩展性,使得新的扩展随着时间的推移而出现,这些扩展是有意义的.

协议的解释有时会改变,即使规格保持不变.

本章提到的协议都是"应用协议",这意味着它们通过更低级的协议,如TCP、UDP和TLS进行传输.它们本身也是随着时间而改变的协议,获得新的特性并受到攻击,从而处理安全性的新方法等等,迫使cURL适应和改变.

## 关于坚持标准和谁是对的

一般来说,有协议规范告诉我们如何发送和接收特定协议的数据.我们遵循的协议规格是由IETF出版的RFCs, 然后再放在一起看看.

有些协议在最终RFC中没有被正确记录,例如,SFTP,我们的实现是基于互联网草案,甚至不是最后一个可用的草案.

然而,协议是由两个对立面争论的,在任何给定的对话中都是这样的,有两个方面来理解或解释某个指令中的给定指令.此外,许多网络软件是在作者没有非常注意规范的情况下编写的, 所以他们
最后采取一些捷径，或者他们只是解释了文本
不同.有时,错误和bug也会影响软件的行为,使其不受规范要求,甚至是禁止的.

在curl项目中,我们使用已发布的规范作为如何操作的规则,直到我们学到其他东西为止.如果流行的替代性实施方式不同于我们所认为的规范,而替代性行为是在大互联网上广泛使用的,那么我们可能会改变脚步,决定与其他人那样一起行动. 如果服务器在我们遵循规范时,拒绝与我们交谈,但是在我们稍微修改规则时工作得很好,那么我们可能最终会完全按照这种方式修改规则—— 如果我们仍然可以成功地与其他实现一起工作.

最终,这是一个个人的决定,在每一个我们都认为一个规范和现实世界不一致的情况下讨论.

在最糟糕的情况下,我们引入选项, 让应用程序开发人员和cURL用户对cURL应该做什么有最终发言权. 我之所以说最糟糕, 是因为要求用户做出这些决定通常非常困难,因为它通常涉及非常棘手的细节和怪异性, 并且需要向用户提出很多问题.我们应该尽最大努力避免向用户提出这样的协议决定.
