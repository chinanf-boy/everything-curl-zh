
# 文件传输协议

文件传输协议FTP可能是curl支持的最古老的网络协议,它创建于20世纪70年代初. 其官方标准[RFC 959](https://www.ietf.org/rfc/rfc959.txt)在1985发布,早于cURL第一个版本 10年.

FTP是在互联网和不同计算机的时代创建的,因此它的工作方式与其他大多数协议稍有不同.这些差异常常可以忽略,事情就会正常运转,但是在事情不按计划运行的时候,了解这些差异也很重要.

## Ping-pong

FTP协议是一个命令和响应协议,客户端发送命令,服务器响应.如果你使用cURL`-v`选项,您将看到在传输过程中的所有命令和响应.

对于普通传输,有5到8个命令需要发送,以及等待和读取的多个响应。更不必说,如果服务器位于远程位置,那么在设置和开始实际文件传输之前,将会有很多时间等待ping通过.对于小文件,初始命令可以比实际的数据传输花费更长的时间.

## 传输模式

当FTP客户端将要传输数据时,它向服务器指定接下来要传输的"传输模式". curl支持的两种传输模式是"ASCII"和"二进制".Ascii主要用于文本, 这通常意味着服务器要用转换换行符来发送文件,而二进制意味着发送数据不变,并假定文件不是文本.

cURL默认为二进制传输模式的FTP,当你要求ASCII模式`-B, --use-ascii`或者通过URL结束加上`;type=A`.

## 认证

通常, FTP是若没有用户名和密码是不能访问的协议之一.但对于那些允许"匿名"FTP访问的系统来说,你可以用你喜欢的任何名字和密码登录.使用curl在FTP URL上进行传输时,没有任何给定的用户名或密码,它使用该名称`anonymous`带上密码`ftp@example.com`.

如果您想提供另一个用户名和密码,您可以传递到cURL. 如`-u, --user`选项或嵌入在URL中的信息:

```
   curl --user daniel:secret ftp://example.com/download

   curl ftp://daniel:secret@example.com/download
```