
## 处理不同的构建选项

curl 和 libcurl源代码现已经被仔细地编写,以在几乎所有的计算机平台上建立和运行.这一切, 只能通过努力工作和坚持一些指导方针 (当然,相当数量的测试)来完成.

一个黄金规则是总是添加`#ifdefs`,用于检查特定特性,然后在编译程序之前,让设置脚本(配置 或 CMake 或 硬编码)检查用户计算机设置中是否存在这些特性. 另外,额外的好处是,由于这种编写代码的方式,一些特性可以显式地关闭, 即使它们在系统中存在,且*能*被使用. 例如,当用户希望构建具有较小占用空间,或禁用某些协议的支持的库版本时, 就会出现这种情况.

例如,在为特定操作系统,或者并不总是存在的特定特性提供单个文件时,项目有时会在整个源文件周围使用`#ifdef`保护. 这是为了使所有平台始终能够构建所有文件,它简化了构建脚本和生成文件.总之,一个完整的文件几乎不增加任何构建时间.

在可能的范围内,我们提供函数和宏使代码看起来和工作相同,且独立于现有的特性,而不是用`ifdefs`散布代码. 其中一些则是缺少特性的构建空宏.

TLS处理和名称解析,都使用内部API处理,该API隐藏了特定实现和第三方软件库的选择.这样,大多数内部设备的工作与TLS库,或名称解析系统就与libcurl的使用无关.
